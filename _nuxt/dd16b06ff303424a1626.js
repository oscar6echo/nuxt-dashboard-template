(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{479:function(t,e,r){"use strict";var n=r(475),o=r(689),c=r(715),l=r(491),d=r(670),h=r(671),f=r(494),m=r(676),v=r(691),y=r(672),w=r(673),x=r(493),C=r(492),T=r(713),j=r(560),S=r(669),k=r(674),M=r(690),_=r(714),O=r(585);e.a={format:o.a,timeFormat:c.a,range:n.j,extent:n.d,mean:n.f,max:n.e,min:n.h,zip:n.n,scaleLinear:l.a,scaleLog:l.b,scaleTime:l.c,select:d.a,selectAll:h.a,axisBottom:f.a,axisLeft:f.b,geoOrthographic:m.a,geoPath:v.a,geoCentroid:y.a,geoInterpolate:w.a,json:x.a,tsv:x.b,transition:C.a,Delaunay:T.a,dsvFormat:j.a,tsvParse:S.a,pointRadial:k.a,lineRadial:M.a,interpolateRainbow:_.a,rgb:O.f}},529:function(t,e,r){var content=r(612);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(48).default)("a7d6f9da",content,!0,{sourceMap:!1})},611:function(t,e,r){"use strict";var n=r(529);r.n(n).a},612:function(t,e,r){(e=r(47)(!1)).push([t.i,"[data-v-182d210e]:export{white:#fff;corpred:#e60028;sapphireblue:#23558c;graybase:#333;grayultralight:#f5f5f5;graylight:#ccc;bluedark:#2f333e;black:#000;brandsuccess:#35bd5b;brandinfo:#009bcd;brandwarning:#f17100;branddanger:#b9292d;greenlight:#bcf7cd;bluelight:#b2e1f0;orangelight:#ffd6b0;redlight:#f7b2be;bluedark2:#444852;bluedark3:#21242b;bluedark4:#191e28;graylighter:#dddedf;gray:#777;graydark:#4c4c4c;red:#dc4941;bluedark2b:#444852;bluegray:#b4bbcb;royalblue:#6488ff;seagreen:#41c49d;slateblue:#5c56e8;sienna:#e88e5e;darkroyalblue:#38699f;darkseagreen:#408182;darkslateblue:#514b90;darksienna:#854b4b}.modt.action-button[data-v-182d210e],.modt.my-dropdown[data-v-182d210e]{background-color:#f1f1f1;border:1px solid #bbb;border-radius:0}.modt.my-dropdown[data-v-182d210e]{padding-left:10px;padding-right:10px}.modt.my-title[data-v-182d210e]{height:40px;color:#333;font-weight:400;font-size:35px}.modt.my-subtitle[data-v-182d210e]{color:#333}.my-wrapper-block[data-v-182d210e]{padding-left:50px;padding-right:50px}.my-wrapper[data-v-182d210e]{width:500px}#trip-time[data-v-182d210e]{width:150px}#select-country[data-v-182d210e]{width:250px}.my-square-box[data-v-182d210e]{border-radius:0}",""]),t.exports=e},677:function(t,e,r){"use strict";r.r(e);var n,o,c=r(276),l=r(482),d=(r(528),r(603),r(53),r(49),r(208),r(604),r(106),r(32)),h=r(657),f=r(607),m=r(479),v=(r(609),r(74)),y=r(500),w=r(610),x=function(){function t(){Object(y.a)(this,t)}return Object(w.a)(t,null,[{key:"fromAngles",value:function(t){var e=Object(v.a)(t,3),r=e[0],p=e[1],g=e[2];r*=Math.PI/360,p*=Math.PI/360,g*=Math.PI/360;var n=Math.sin(r),o=Math.cos(r),c=Math.sin(p),l=Math.cos(p),d=Math.sin(g),h=Math.cos(g);return[o*l*h+n*c*d,n*l*h-o*c*d,o*c*h+n*l*d,o*l*d-n*c*h]}},{key:"toAngles",value:function(t){var e=Object(v.a)(t,4),a=e[0],b=e[1],r=e[2],n=e[3];return[180*Math.atan2(2*(a*b+r*n),1-2*(b*b+r*r))/Math.PI,180*Math.asin(Math.max(-1,Math.min(1,2*(a*r-n*b))))/Math.PI,180*Math.atan2(2*(a*n+b*r),1-2*(r*r+n*n))/Math.PI]}},{key:"interpolateAngles",value:function(a,b){var i=t.interpolate(t.fromAngles(a),t.fromAngles(b));return function(e){return t.toAngles(i(e))}}},{key:"interpolateLinear",value:function(t,e){var r=Object(v.a)(t,4),n=r[0],o=r[1],c=r[2],l=r[3],d=Object(v.a)(e,4),h=d[0],f=d[1],m=d[2],y=d[3];h-=n,f-=o,m-=c,y-=l;var w=new Array(4);return function(t){var e=Math.hypot(w[0]=n+h*t,w[1]=o+f*t,w[2]=c+m*t,w[3]=l+y*t);return w[0]/=e,w[1]/=e,w[2]/=e,w[3]/=e,w}}},{key:"interpolate",value:function(e,r){var n=Object(v.a)(e,4),o=n[0],c=n[1],l=n[2],d=n[3],h=Object(v.a)(r,4),f=h[0],m=h[1],y=h[2],w=h[3],x=o*f+c*m+l*y+d*w;if(x<0&&(f=-f,m=-m,y=-y,w=-w,x=-x),x>.9995)return t.interpolateLinear([o,c,l,d],[f,m,y,w]);var C=Math.acos(Math.max(-1,Math.min(1,x))),T=new Array(4),j=Math.hypot(f-=o*x,m-=c*x,y-=l*x,w-=d*x);return f/=j,m/=j,y/=j,w/=j,function(t){var e=C*t,s=Math.sin(e),r=Math.cos(e);return T[0]=o*r+f*s,T[1]=c*r+m*s,T[2]=l*r+y*s,T[3]=d*r+w*s,T}}}]),t}(),C=r(122),T=r(20),j={name:"TabMapGlobe",props:{styleGlobe:{type:Object,required:!0}},data:function(){return{g:{},tilt:0,selected:null,tripTimeSec:3}},computed:{width:function(){return this.styleGlobe.width},height:function(){return this.styleGlobe.height},url:function(){return this.$route}},watch:{url:{handler:function(){T.a.watchStart(this,"url",[JSON.stringify(this.url.query)]);var t=Object(C.c)(this);t.globe&&(this.selected=t.globe.selectedCountry,this.tripTimeSec=+t.globe.tripTimeSec,T.a.watchEnd(this,"url changed prop",[this.selected,this.tripTimeSec]))},immediate:!0},selected:{handler:function(t,e){this.selected&&this.travelTo(e,t)},immediate:!1}},mounted:(o=Object(d.a)(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T.a.hookStart(this,"mounted"),this.g.sphere={type:"Sphere"},t.next=4,m.a.json("https://cdn.jsdelivr.net/npm/world-atlas@1/world/110m.json");case 4:return e=t.sent,this.g.land=h.a(e,e.objects.land),this.g.countries=h.a(e,e.objects.countries).features,this.g.idToCountry=this.g.countries.reduce((function(t,e){var r=Object(f.cloneDeep)(t);return r[e.id]=e,r}),{}),this.g.borders=h.b(e,e.objects.countries,(function(a,b){return a!==b})),this.g.tilt=20,t.next=12,m.a.tsv("https://cdn.jsdelivr.net/npm/world-atlas@1/world/110m.tsv");case 12:r=t.sent,this.g.idToName=new Map(r.map((function(t){return[t.iso_n3,t.name_long]}))),this.g.nameToId=new Map(r.map((function(t){var e=t.iso_n3;return[t.name_long,e]}))),n=Array.from(this.g.idToName.values()).sort(),this.$store.dispatch("globe/setCountries",n),this.setUpCanvas(),T.a.hookEnd(this,"mounted");case 19:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),methods:{setUpCanvas:function(){T.a.methodStart(this,"setUpCanvas");this.g.projection=m.a.geoOrthographic().fitExtent([[10,10],[this.width-10,this.height-10]],this.g.sphere),this.g.context=this.$refs["my-canvas"].getContext("2d"),this.g.path=m.a.geoPath(this.g.projection,this.g.context),this.travelTo(null,this.selected)},travelTo:(n=Object(d.a)(regeneratorRuntime.mark((function t(e,r){var n,o,c,l,d,h,f,v,y,w,C,j,S=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T.a.funcStart("travelTo",[e," to ",r]),e&&this.g.nameToId?(n=this.g.nameToId.get(e),o=this.g.idToCountry[n],l=m.a.geoCentroid(o),c=[-l[0],this.tilt-l[1],0]):(l=[0,0],c=[0,0,0]),r&&this.g.nameToId?(d=this.g.nameToId.get(r),h=this.g.idToCountry[d],v=m.a.geoCentroid(h),f=[-v[0],this.tilt-v[1],0]):(v=[0,0],f=[0,0,0]),y=m.a.geoInterpolate(l,v),w=x.interpolateAngles(c,f),C=h,j={country:r,centerCoords:v},this.$store.dispatch("globe/setCurrent",j),t.next=10,m.a.transition().duration(this.tripTime||1e3).tween("render",(function(){return function(t){S.g.projection.rotate(w(t)),S.render(C,{type:"LineString",coordinates:[l,y(t)]})}})).transition().tween("render",(function(){return function(t){S.render(C,{type:"LineString",coordinates:[y(t),v]})}})).end();case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)}),render:function(t,e){var r=this.g.context,path=this.g.path;return r.clearRect(0,0,this.width,this.height),r.beginPath(),path(this.g.land),r.fillStyle="#ccc",r.fill(),r.beginPath(),path(t),r.fillStyle="#f00",r.fill(),r.beginPath(),path(this.g.borders),r.strokeStyle="#fff",r.lineWidth=.5,r.stroke(),r.beginPath(),path(this.g.sphere),r.strokeStyle="#000",r.lineWidth=1,r.stroke(),r.beginPath(),path(e),r.stroke(),r.canvas}}},S=r(42),k={name:"TabMap",components:{Globe:Object(S.a)(j,(function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"my-canvas",attrs:{width:this.width,height:this.height}})}),[],!1,null,"1601a55d",null).exports},props:{},data:function(){return{tripTimeSec:3,selectedCountry:"",optionsCountry:[],styleGlobe:{width:700,height:500}}},computed:{title:function(){return Object(l.a)("flight path")},countries:function(){return this.$store.getters["globe/countries"]},current:function(){return this.$store.getters["globe/current"]}},watch:{countries:{handler:function(){this.optionsCountry=[{value:"",text:"Select a Country",disabled:!0}].concat(Object(c.a)(this.countries.map((function(t){return{value:t,text:t}}))))},immediate:!0},selectedCountry:{handler:function(t,e){T.a.watchStart(this,"selectedCountry",[t,e]),this.updateState()},immediate:!1},tripTimeSec:{handler:function(t,e){T.a.watchStart(this,"tripTimeSec",[t,e]),this.updateState()},immediate:!1}},mounted:function(){var t=Object(C.c)(this);t.globe&&(this.selectedCountry=t.globe.selectedCountry,this.tripTimeSec=t.globe.tripTimeSec)},methods:{updateState:function(){var t=this.selectedCountry,e=this.tripTimeSec;T.a.methodStart(this,"updateState",[t,e]),Object(C.d)({that:this,update:{globe:{selectedCountry:t,tripTimeSec:e}}})}}},M=(r(611),{name:"Map",components:{TabMap:Object(S.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:" my-wrapper-block",attrs:{fluid:""}},[r("div",{staticClass:"d-flex flex-column align-center"},[r("div",{staticClass:"display-1 modt my-title mt-1 mb-2"},[t._v(t._s(t.title))]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"subtitle-1 mb-3"},[t._v("\n      "+t._s(t.current)+"\n    ")]),t._v(" "),r("div",{staticClass:"d-flex flex-row justify-space-between mt-2 mb-4 my-wrapper"},[r("div",{attrs:{id:"trip-time"}},[r("v-text-field",{staticClass:"my-square-box",attrs:{type:"number",step:"0.5",label:"Trip time (seconds)",outlined:"",dense:""},model:{value:t.tripTimeSec,callback:function(e){t.tripTimeSec=t._n(e)},expression:"tripTimeSec"}})],1),t._v(" "),r("div",{attrs:{id:"select-country"}},[r("v-select",{staticClass:"my-square-box",attrs:{items:t.optionsCountry,label:"Travel to Country",outlined:"",dense:""},model:{value:t.selectedCountry,callback:function(e){t.selectedCountry=e},expression:"selectedCountry"}})],1)]),t._v(" "),r("Globe",{attrs:{"style-globe":t.styleGlobe}})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle-1 modt my-subtitle mb-3"},[this._v("\n      Advanced "),e("a",{attrs:{href:"https://d3js.org/"}},[this._v("d3js")]),this._v(" - Straight from this\n      "),e("a",{attrs:{href:"https://observablehq.com/@oscar6echo"}},[this._v("ObservableHQ")]),this._v(" "),e("a",{attrs:{href:"https://observablehq.com/@d3/world-tour"}},[this._v("notebook")])])}],!1,null,"182d210e",null).exports},data:function(){return{}}}),_=Object(S.a)(M,(function(){var t=this.$createElement;return(this._self._c||t)("TabMap")}),[],!1,null,"66e6b7fe",null);e.default=_.exports}}]);